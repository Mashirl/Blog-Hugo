<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>日常 on Mashirl's Blog</title><link>https://mashirl.com/tags/%E6%97%A5%E5%B8%B8/</link><description>Recent content in 日常 on Mashirl's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 11 Jan 2025 00:00:00 +0800</lastBuildDate><atom:link href="https://mashirl.com/tags/%E6%97%A5%E5%B8%B8/index.xml" rel="self" type="application/rss+xml"/><item><title>Elements Desktop 下的多账户管理</title><link>https://mashirl.com/2025/01/11/multi-accounts-management-for-elements-desktop/</link><pubDate>Sat, 11 Jan 2025 00:00:00 +0800</pubDate><guid>https://mashirl.com/2025/01/11/multi-accounts-management-for-elements-desktop/</guid><description>&lt;p>各位新年快乐！这大概本站是2024年的第一篇文章。&lt;/p>
&lt;p>最近在电脑上安装了Elements Desktop作为Matrix客户端。但到了需要多账户切换的时候可就伤了脑筋，我惊奇地发现，这个客户端居然没有多账户管理的功能！&lt;/p>
&lt;p>于是我就在网上简单搜索了一下解决方案，然后简单地进行了一些改进。&lt;/p>
&lt;p>&lt;del>然后决定顺便水一篇文章发出来了&lt;/del>&lt;/p>
&lt;h2 id="系统环境">系统环境
&lt;/h2>&lt;p>为了避免对内容理解造成影响，先介绍一下我的系统环境。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">操作系统：Manjaro Linux x86_64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Element 版本：1.11.87
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">安装方式：Flatpak
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="解决方案添加启动参数">解决方案：添加启动参数
&lt;/h2>&lt;h3 id="思路">思路
&lt;/h3>&lt;p>根据&lt;a class="link" href="https://ubuntu.com/community/communications/matrix/multiple-accounts" target="_blank" rel="noopener"
>这篇文档&lt;/a>，我们可以通过添加&lt;code>--profile&lt;/code>运行参数的方式，使客户端在一个不同的Profile中启动。&lt;/p>
&lt;p>例如下面这条命令&lt;/p>
&lt;p>&lt;code>element-desktop --profile 0721&lt;/code>&lt;/p>
&lt;p>会使客户端在一个名为&lt;code>0721&lt;/code>的profile中启动。&lt;/p>
&lt;p>对应profile的数据文件会存储在 &lt;code>/home/[username]/.config/Element-0721&lt;/code>，而默认的数据文件目录则是 &lt;code>/home/[username]/.config/Element&lt;/code>。&lt;/p>
&lt;h3 id="优化">优化
&lt;/h3>&lt;p>经常使用命令行启动客户端并不是一件很优雅的事情，让我们对这个过程做一些小小的优化。&lt;/p>
&lt;h4 id="创建桌面项desktop-entry">创建桌面项（Desktop Entry）
&lt;/h4>&lt;blockquote>
&lt;p>吐槽：我也不知道这东西的中文名叫什么，然后搜了一下，&lt;a class="link" href="https://wiki.archlinuxcn.org/wiki/%E6%A1%8C%E9%9D%A2%E9%A1%B9" target="_blank" rel="noopener"
>archlinuxcn&lt;/a>是这样翻译的。&lt;/p>
&lt;p>&lt;del>其实就是普通的快捷方式吧&lt;/del>&lt;/p>&lt;/blockquote>
&lt;p>创建桌面项可以使客户端的启动流程更加快捷和优雅。&lt;/p>
&lt;p>让我们看看怎么做吧&lt;/p>
&lt;ul>
&lt;li>复制原有的桌面项&lt;/li>
&lt;/ul>
&lt;p>我的桌面项存储在&lt;code>/usr/share/applications&lt;/code>下面，如果你的不在这里，可以自行查找一下桌面项的位置。&lt;/p>
&lt;p>复制出来，放到个人的文件夹下面&lt;code>~/.local/share/applications&lt;/code>&lt;/p>
&lt;p>大概是下面这样：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-desktop" data-lang="desktop">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Desktop Entry]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Element&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Comment&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Feature-rich client for Matrix&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Exec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/bin/element-desktop %u&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Terminal&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Icon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">io.element.Element&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">StartupWMClass&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Element&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Categories&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Network;InstantMessaging;Chat;IRCClient&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">MimeType&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">x-scheme-handler/element;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>修改桌面项&lt;/li>
&lt;/ul>
&lt;p>这里&lt;code>Exec&lt;/code>这一项是表示点击桌面项时运行的命令，而&lt;code>Name&lt;/code>是桌面项显示出来的名字。&lt;/p>
&lt;p>这里我们就改这两个字段。&lt;/p>
&lt;p>首先，将&lt;code>Exec&lt;/code>字段加上&lt;code>--profile [profilename]&lt;/code>的启动参数，这里我们用刚才的&lt;code>0721&lt;/code>举例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-desktop" data-lang="desktop">&lt;span class="line">&lt;span class="cl">&lt;span class="na">Exec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/bin/element-desktop --profile 0721 %u&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>名字我们也可以起一个相关一些的，比如&lt;code>Elements (0721)&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-desktop" data-lang="desktop">&lt;span class="line">&lt;span class="cl">&lt;span class="na">Name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Elements (0721)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最后我们得到的是一个新的“桌面项”，像下面这样&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-desktop" data-lang="desktop">&lt;span class="line">&lt;span class="cl">&lt;span class="k">[Desktop Entry]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Element (0721)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Comment&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Feature-rich client for Matrix&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Exec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/bin/element-desktop --profile 0721 %u&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Terminal&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Icon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">io.element.Element&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">StartupWMClass&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Element&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">Categories&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">Network;InstantMessaging;Chat;IRCClient&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="na">MimeType&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">x-scheme-handler/element;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样，你就可以通过在桌面上点击来轻松多开Elements了。❤️&lt;/p>
&lt;h4 id="补充">补充
&lt;/h4>&lt;p>不排除可能会有&lt;del>矩阵海王&lt;/del>在各种站点开设&lt;del>114514&lt;/del>个账号的可能性，在这里补充一下。&lt;/p>
&lt;p>在你的&lt;code>~/.local/share/applications&lt;/code>目录中，不管下面有几级目录，都是可以正确检测到“桌面项”文件，并且显示在桌面环境的启动器中的。&lt;/p>
&lt;p>所以，你可以在下面再创建一个二级目录来存放你的“桌面项”们。&lt;/p>
&lt;h2 id="参考资料">参考资料
&lt;/h2>&lt;p>&lt;a class="link" href="https://ubuntu.com/community/communications/matrix/multiple-accounts" target="_blank" rel="noopener"
>Using multiple Matrix accounts - Ubuntu Community&lt;/a>&lt;/p></description></item></channel></rss>